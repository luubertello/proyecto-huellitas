<main class="page">
  <form [formGroup]="perfilForm" (ngSubmit)="guardarPerfil()" novalidate>
    <section class="profile-card">

      <!-- Columna: Foto -->
      <div class="photo-pane">
        <div class="card-header">
          <h1>Mi Perfil</h1>
          <p class="card-sub">Actualiza tu información personal.</p>
        </div>

        <div class="photo-frame">
          <img
            [src]="perfilForm.get('foto')?.value || fotoPreview || 'assets/avatar-placeholder.png'"
            alt="Foto de perfil"
            class="photo"
          />
        </div>

        <label for="foto-file" class="photo-help">Actualizar imagen de perfil</label>
        <input
          id="foto-file"
          type="file"
          accept="image/*"
          (change)="onFotoChange($event)"
          class="form-control file-input"
        />

        <!-- Alternativa por URL (opcional) -->
        <label for="foto-url" class="photo-help alt">o pegar URL de imagen</label>
        <input
          id="foto-url"
          type="url"
          formControlName="foto"
          class="form-control photo-url-input"
          placeholder="https://ejemplo.com/mi-foto.jpg"
        />
      </div>

      <!-- Columna: Datos -->
      <div class="form-pane">

        <div class="form-grid info-grid">
          <label class="field">
            <span>Nombre</span>
            <input type="text" formControlName="nombre" placeholder="Tu nombre" />
          </label>

          <label class="field">
            <span>Apellido</span>
            <input type="text" formControlName="apellido" placeholder="Tu apellido" />
          </label>

          <label class="field span-2">
            <span>Email</span>
            <input type="email" formControlName="email" placeholder="tu@email.com" />
          </label>

          <label class="field">
            <span>Fecha de Nacimiento</span>
            <input type="date" formControlName="fechaNacimiento" />
          </label>

          <label class="field">
            <span>Teléfono</span>
            <input type="tel" formControlName="telefono" placeholder="+54 9 ..." />
          </label>

          <div class="divider span-2" role="separator" aria-label="Cambio de contraseña"></div>

          <label class="field">
            <span>Contraseña actual</span>
            <input type="password" formControlName="passwordActual" autocomplete="current-password" />
          </label>

          <label class="field">
            <span>Nueva contraseña</span>
            <input type="password" formControlName="passwordNueva" autocomplete="new-password" />
          </label>

          <label class="field span-2">
            <span>Confirmar contraseña</span>
            <input type="password" formControlName="passwordConfirm" autocomplete="new-password" />
          </label>
        </div>

        <p class="privacy-hint">
          Guardamos y tratamos estos datos de forma segura. No compartimos tu información con terceros.
        </p>

        <div class="actions">
          <button type="submit" class="btn-primary" [disabled]="perfilForm.invalid">
            GUARDAR CAMBIOS
          </button>
        </div>
      </div>
    </section>
  </form>
</main>
